

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mlogfilter &mdash; mtools  documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/mtools.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="mloginfo" href="mloginfo.html" />
    <link rel="prev" title="mlaunch" href="mlaunch.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> mtools
          

          
            
            <img src="_static/mtools.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlaunch.html">mlaunch</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">mlogfilter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#general-parameters">General Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#help">Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version">Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verbosity">Verbosity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shorten-log-lines">Shorten Log Lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#human-readability">Human Readability</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exclude-log-lines">Exclude Log Lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#json-output">JSON Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timestamp-format">Timestamp Format</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#merge-parameters">Merge Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#merge-markers">Merge Markers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timezone-adjustments">Timezone Adjustments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#filter-parameters">Filter Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#namespace">Namespace</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operation">Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thread">Thread</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pattern">Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="#duration">Duration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collection-scans">Collection Scans</a></li>
<li class="toctree-l3"><a class="reference internal" href="#keywords">Keywords</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time-slicing">Time Slicing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mloginfo.html">mloginfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlogvis.html">mlogvis</a></li>
<li class="toctree-l1"><a class="reference internal" href="mplotqueries.html">mplotqueries</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contribute to mtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changes to mtools</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mtools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>mlogfilter</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mlogfilter">
<span id="id1"></span><h1>mlogfilter<a class="headerlink" href="#mlogfilter" title="Permalink to this headline">#</a></h1>
<p>A script to reduce the amount of information from MongoDB log files.
<strong>mlogfilter</strong> takes one or several MongoDB log files as input, together with
some filter parameters, parses the contained log lines and outputs the lines
that match according to the filter parameters.</p>
<p>If several log files are provided, <strong>mlogfilter</strong> will merge them by timestamp
and insert a marker at the beginning of each line, before applying any of the
other filters.</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--version<span class="o">]</span> logfile <span class="o">[</span>logfile ...<span class="o">]</span>
           <span class="o">[</span>--verbose<span class="o">]</span> <span class="o">[</span>--shorten <span class="o">[</span>LENGTH<span class="o">]]</span>
           <span class="o">[</span>--human<span class="o">]</span> <span class="o">[</span>--exclude<span class="o">]</span> <span class="o">[</span>--json<span class="o">]</span>
           <span class="o">[</span>--timestamp-format <span class="o">{</span>ctime-pre2.4, ctime, iso8601-utc, iso8601-local<span class="o">}]</span>
           <span class="o">[</span>--markers MARKERS <span class="o">[</span>MARKERS ...<span class="o">]]</span> <span class="o">[</span>--timezone N <span class="o">[</span>N ...<span class="o">]]</span>
           <span class="o">[</span>--namespace NS<span class="o">]</span> <span class="o">[</span>--operation OP<span class="o">]</span> <span class="o">[</span>--thread THREAD<span class="o">]</span>
           <span class="o">[</span>--slow <span class="o">[</span>SLOW<span class="o">]]</span>  <span class="o">[</span>--fast <span class="o">[</span>FAST<span class="o">]]</span> <span class="o">[</span>--scan<span class="o">]</span>
           <span class="o">[</span>--word WORD <span class="o">[</span>WORD ...<span class="o">]]</span>
           <span class="o">[</span>--from FROM <span class="o">[</span>FROM ...<span class="o">]]</span> <span class="o">[</span>--to TO <span class="o">[</span>TO ...<span class="o">]]</span>
</pre></div>
</div>
<p><strong>mlogfilter</strong> can also be used with shell pipe syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat logfile <span class="p">|</span> mlogfilter <span class="o">[</span>parameters<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="general-parameters">
<h2>General Parameters<a class="headerlink" href="#general-parameters" title="Permalink to this headline">#</a></h2>
<div class="section" id="help">
<h3>Help<a class="headerlink" href="#help" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">-h,</span> <span class="pre">--help</span></code></dt>
<dd>shows the help text and exits.</dd>
</dl>
</div>
<div class="section" id="version">
<h3>Version<a class="headerlink" href="#version" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--version</span></code></dt>
<dd>shows the version number and exits.</dd>
</dl>
</div>
<div class="section" id="verbosity">
<h3>Verbosity<a class="headerlink" href="#verbosity" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--verbose</span></code></dt>
<dd>shows extra information about the parser and arguments. This is usually only
needed for debugging purposes.</dd>
</dl>
</div>
<div class="section" id="shorten-log-lines">
<h3>Shorten Log Lines<a class="headerlink" href="#shorten-log-lines" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--shorten</span> <span class="pre">[LENGTH]</span></code></dt>
<dd>will shorten long lines to at most <code class="docutils literal notranslate"><span class="pre">LENGTH</span></code> characters, only showing the
beginning and end of a line. If <code class="docutils literal notranslate"><span class="pre">LENGTH</span></code> is not provided, the default is
200. This is useful to ensure that each log line fits into a shell / editor
window to compare certain re-occurring values. The line is split in the
middle and the excess characters are replaced with <code class="docutils literal notranslate"><span class="pre">...</span></code>.</dd>
</dl>
</div>
<div class="section" id="human-readability">
<h3>Human Readability<a class="headerlink" href="#human-readability" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--human</span></code></dt>
<dd>makes log lines easier to read for humans. Long numbers will be separated by
“thousands” comma separators, and the duration at the end of an operation is
augmented with the hours, minutes and seconds for readability.</dd>
</dl>
</div>
<div class="section" id="exclude-log-lines">
<h3>Exclude Log Lines<a class="headerlink" href="#exclude-log-lines" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--exclude</span></code></dt>
<dd>This flag will invert the filter, excluding all the lines that match all
filters, and only returning the non-matching lines.</dd>
</dl>
</div>
<div class="section" id="json-output">
<h3>JSON Output<a class="headerlink" href="#json-output" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--json</span></code></dt>
<dd><p class="first">If this flag is used, the output will be in JSON format instead of the
regular log line string. Use this in conjunction with MongoDB’s
<code class="docutils literal notranslate"><span class="pre">mongoimport</span></code> to store the log file data in a MongoDB database.</p>
<p>The values that are extracted and stored as separate fields in the resulting
JSON document are (some may not &gt; apply for all lines): <code class="docutils literal notranslate"><span class="pre">line_str</span></code> (the
full line as string), <code class="docutils literal notranslate"><span class="pre">split_tokens</span></code> (the line as string tokens split on
whitespace, stored as array of strings), <code class="docutils literal notranslate"><span class="pre">datetime</span></code> (the datetime for this
line), <code class="docutils literal notranslate"><span class="pre">operation</span></code>, <code class="docutils literal notranslate"><span class="pre">thread</span></code>, <code class="docutils literal notranslate"><span class="pre">namespace</span></code>, <code class="docutils literal notranslate"><span class="pre">nscanned</span></code>,
<code class="docutils literal notranslate"><span class="pre">ntoreturn</span></code>, <code class="docutils literal notranslate"><span class="pre">nreturned</span></code>, <code class="docutils literal notranslate"><span class="pre">ninserted</span></code>, <code class="docutils literal notranslate"><span class="pre">nupdated</span></code>, <code class="docutils literal notranslate"><span class="pre">duration</span></code> (the
duration in milliseconds), <code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">w</span></code> (read or write lock times in
microseconds), <code class="docutils literal notranslate"><span class="pre">numYields</span></code> (the number of yields for this operation)</p>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --slow --json <span class="p">|</span> mongoimport -d <span class="nb">test</span> -c mycoll
</pre></div>
</div>
<p class="last">This command would apply the “slow” filter to <code class="docutils literal notranslate"><span class="pre">mongod.log</span></code> and output the
information as JSON, which can then be read my <code class="docutils literal notranslate"><span class="pre">mongoimport</span></code>. The data is
stored in the database <code class="docutils literal notranslate"><span class="pre">test</span></code>, collection <code class="docutils literal notranslate"><span class="pre">mycoll</span></code>. Each log line will
be stored as a separate document.</p>
</dd>
</dl>
</div>
<div class="section" id="timestamp-format">
<h3>Timestamp Format<a class="headerlink" href="#timestamp-format" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--timestamp-format</span> <span class="pre">FORMAT</span></code></dt>
<dd><p class="first">Changes the timestamp format to the specified format. Possible formats are:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">ctime-pre2.4</span></code> (the format looks like <code class="docutils literal notranslate"><span class="pre">Fri</span> <span class="pre">Jul</span> <span class="pre">26</span> <span class="pre">11:38:37</span></code> without
milliseconds)</li>
<li><code class="docutils literal notranslate"><span class="pre">ctime</span></code> (the format looks like <code class="docutils literal notranslate"><span class="pre">Fri</span> <span class="pre">Jul</span> <span class="pre">26</span> <span class="pre">11:38:37.712</span></code> with
milliseconds)</li>
<li><code class="docutils literal notranslate"><span class="pre">iso8601-utc</span></code> (the format looks like <code class="docutils literal notranslate"><span class="pre">2013-07-26T11:38:37.712Z</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">iso8601-local</span></code> (the format looks like
<code class="docutils literal notranslate"><span class="pre">2013-07-26T11:38:37.712+0000</span></code>)</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="merge-parameters">
<h2>Merge Parameters<a class="headerlink" href="#merge-parameters" title="Permalink to this headline">#</a></h2>
<p>The following parameters are useful if several log files are provided.
<strong>mlogfilter</strong> will merge the files based on the timestamp of each line, before
applying any other filters.</p>
<div class="section" id="merge-markers">
<h3>Merge Markers<a class="headerlink" href="#merge-markers" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--markers</span> <span class="pre">M</span> <span class="pre">[M</span> <span class="pre">...]</span></code></dt>
<dd><p class="first">Markers help distinguish the source of merged log lines. Each merged line is
preceded with a marker that indicates the original file. By default, the
marker type is <code class="docutils literal notranslate"><span class="pre">filename</span></code>. Another marker type can be specified, or custom
markers can be provided. These are the available marker types:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">filename</span></code> (the original filename in curly braces)</li>
<li><code class="docutils literal notranslate"><span class="pre">enum</span></code> (numeric markers <code class="docutils literal notranslate"><span class="pre">{1}</span></code>, <code class="docutils literal notranslate"><span class="pre">{2}</span></code>, <code class="docutils literal notranslate"><span class="pre">{3}</span></code>, …)</li>
<li><code class="docutils literal notranslate"><span class="pre">alpha</span></code> (letters <code class="docutils literal notranslate"><span class="pre">{a}</span></code>, <code class="docutils literal notranslate"><span class="pre">{b}</span></code>, <code class="docutils literal notranslate"><span class="pre">{c}</span></code>, …)</li>
<li><code class="docutils literal notranslate"><span class="pre">none</span></code> (no markers, this is useful if you merge log files form the
same host but for different times)</li>
</ul>
</dd>
</dl>
<p>Custom markers are also possible. Make sure the number of specified markers is
the same as the number of provided log files.</p>
</div>
<div class="section" id="timezone-adjustments">
<h3>Timezone Adjustments<a class="headerlink" href="#timezone-adjustments" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--timezone</span> <span class="pre">N</span> <span class="pre">[N</span> <span class="pre">...]</span></code></dt>
<dd>The timezone parameter adjusts the timestamp of the log lines in hours. If
one timezone value is provided, it is applied globally to all log lines. You
can also adjust individual log files by providing the same number of
timezone parameters as log files. Each log file is adjusted individually.
For negative adjustments, the value has to be quoted, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;-2&quot;</span></code>.</dd>
</dl>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter logfile1.log logfile2.log --timezone <span class="m">4</span> <span class="m">0</span>
</pre></div>
</div>
<p>This example would move the time of <code class="docutils literal notranslate"><span class="pre">logfile1.log</span></code> four hours into the
future, while keeping the time of <code class="docutils literal notranslate"><span class="pre">logfile2.log</span></code> constant.</p>
</div>
</div>
<div class="section" id="filter-parameters">
<span id="mlogfilter-filters"></span><h2>Filter Parameters<a class="headerlink" href="#filter-parameters" title="Permalink to this headline">#</a></h2>
<p>The next set of parameters filter for certain log lines, and lines are only
returned if they match all the filters (if <code class="docutils literal notranslate"><span class="pre">--exclude</span></code> is set, a line is
returned if it would normally not be returned, i.e. if it does not match one or
more of the filters).</p>
<div class="section" id="namespace">
<h3>Namespace<a class="headerlink" href="#namespace" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--namespace</span> <span class="pre">NS</span></code></dt>
<dd>filter by namespace <code class="docutils literal notranslate"><span class="pre">NS</span></code>, where <code class="docutils literal notranslate"><span class="pre">NS</span></code> has to be of the form
<code class="docutils literal notranslate"><span class="pre">&lt;database&gt;.&lt;collection&gt;</span></code>. Only lines matching this namespace are being
returned. Note that the <code class="docutils literal notranslate"><span class="pre">$</span></code> sign can be matched by escaping it with
<code class="docutils literal notranslate"><span class="pre">\$</span></code>. Currently, only one namespace can be specified.</dd>
</dl>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --namespace admin.<span class="se">\$</span>cmd --slow <span class="m">1000</span>
</pre></div>
</div>
<p>This will return all admin commands that have been slower than 1 second.</p>
</div>
<div class="section" id="operation">
<h3>Operation<a class="headerlink" href="#operation" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--operation</span> <span class="pre">OP</span></code></dt>
<dd>filter by operation <code class="docutils literal notranslate"><span class="pre">OP</span></code>, where <code class="docutils literal notranslate"><span class="pre">OR</span></code> can be any of <code class="docutils literal notranslate"><span class="pre">query</span></code>,
<code class="docutils literal notranslate"><span class="pre">insert</span></code>, <code class="docutils literal notranslate"><span class="pre">update</span></code>, <code class="docutils literal notranslate"><span class="pre">delete</span></code>, <code class="docutils literal notranslate"><span class="pre">command</span></code>, <code class="docutils literal notranslate"><span class="pre">getmore</span></code>. Only the
matching operations are returned. Currently, only one operation can be
specified.</dd>
</dl>
</div>
<div class="section" id="thread">
<h3>Thread<a class="headerlink" href="#thread" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--thread</span> <span class="pre">THREAD</span></code></dt>
<dd>filter by thread name (marked in square brackets after the timestamp in each
line). This is useful to trace a single connection to the database.</dd>
</dl>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --thread conn1234
</pre></div>
</div>
<p>This will return all lines that were issued from connection <code class="docutils literal notranslate"><span class="pre">conn1234</span></code>. Note
that the initial line marking the opening of a connection (containing
<code class="docutils literal notranslate"><span class="pre">connection</span> <span class="pre">accepted</span></code>) itself is not on the same thread but on thread
<code class="docutils literal notranslate"><span class="pre">[initandlisten]</span></code>.</p>
</div>
<div class="section" id="pattern">
<h3>Pattern<a class="headerlink" href="#pattern" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--pattern</span> <span class="pre">P</span></code></dt>
<dd>filter by pattern <code class="docutils literal notranslate"><span class="pre">P</span></code>, where <code class="docutils literal notranslate"><span class="pre">P</span></code> has to be a JSON string inside single
quotes. A pattern is a transformation of a query into a canonicalized form,
where values are replaced by <code class="docutils literal notranslate"><span class="pre">1</span></code> and fields are reordered alphabetically.
Only query, update and remove operations matching this query pattern (also
called “query shape”) are being returned.</dd>
</dl>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --pattern <span class="s1">&#39;{&quot;_id&quot;: 1, &quot;host&quot;: 1, &quot;ns&quot;: 1}&#39;</span>
</pre></div>
</div>
<p>This will return all query, update and remove operations that match the pattern
<code class="docutils literal notranslate"><span class="pre">{&quot;_id&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;host&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;ns&quot;:</span> <span class="pre">1}</span></code>.</p>
<p>The field names must be surrounded by double quotes for valid JSON.</p>
</div>
<div class="section" id="duration">
<h3>Duration<a class="headerlink" href="#duration" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--slow</span> <span class="pre">MS</span></code>, <code class="docutils literal notranslate"><span class="pre">--fast</span> <span class="pre">MS</span></code></dt>
<dd>returns only operations that are slower/faster than <code class="docutils literal notranslate"><span class="pre">MS</span></code> milliseconds. Not
all lines in a log file have a duration, those without do not match the
filter and are not being returned.</dd>
</dl>
</div>
<div class="section" id="collection-scans">
<h3>Collection Scans<a class="headerlink" href="#collection-scans" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--scan</span></code></dt>
<dd>This flag attempts to detect queries that not using an index efficiently
(scanning a large number of index keys relative to results) and returns only
lines that match the detection heuristic. To match, a line has to have an
<code class="docutils literal notranslate"><span class="pre">nscanned</span></code> value of 10000 or larger, and the ratio of <code class="docutils literal notranslate"><span class="pre">n</span></code> / <code class="docutils literal notranslate"><span class="pre">nscanned</span></code>
must be larger than 100. These values have proven useful to detect potential
collection scans. For confirmed collection scans, instead use
<code class="docutils literal notranslate"><span class="pre">--planSummary</span> <span class="pre">COLLSCAN</span></code>.</dd>
</dl>
</div>
<div class="section" id="keywords">
<h3>Keywords<a class="headerlink" href="#keywords" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--word</span> <span class="pre">WORD</span> <span class="pre">[WORD</span> <span class="pre">...]</span></code></dt>
<dd>Only lines that contain one or more of the provided words match this filter
and are returned.</dd>
</dl>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --word assert warning error
</pre></div>
</div>
<p>The below line matches all lines that contain any of the words <code class="docutils literal notranslate"><span class="pre">assert</span></code>,
<code class="docutils literal notranslate"><span class="pre">warning</span></code>, <code class="docutils literal notranslate"><span class="pre">error</span></code>:</p>
</div>
<div class="section" id="time-slicing">
<h3>Time Slicing<a class="headerlink" href="#time-slicing" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--from</span> <span class="pre">FROM</span> <span class="pre">[FROM</span> <span class="pre">...]</span></code>, <code class="docutils literal notranslate"><span class="pre">--to</span> <span class="pre">TO</span> <span class="pre">[TO</span> <span class="pre">...]</span></code></dt>
<dd>These parameters slice the log file by time, by providing either a lower
bound (<code class="docutils literal notranslate"><span class="pre">--from</span></code>) or an upper bound (<code class="docutils literal notranslate"><span class="pre">--to</span></code>) or both. This feature is
implemented using binary search, making time slicing very fast and
efficient. It should always be used if appropriate for the task. The
arguments that can be passed into these parameters are quite flexible, and
are explained below.</dd>
</dl>
<p>Both <code class="docutils literal notranslate"><span class="pre">FROM</span></code> and <code class="docutils literal notranslate"><span class="pre">TO</span></code> can accept the same format, which is defined as
<code class="docutils literal notranslate"><span class="pre">[DATE]</span> <span class="pre">[TIME]</span> <span class="pre">[OFFSET]</span></code> separated by space. The square brackets indicate
that any of these parts can also be omitted.</p>
<p><code class="docutils literal notranslate"><span class="pre">DATE</span></code> can be any of:</p>
<ul class="simple">
<li>a 3-letter weekday (e.g., <code class="docutils literal notranslate"><span class="pre">Mon</span></code>, <code class="docutils literal notranslate"><span class="pre">Wed</span></code>, <code class="docutils literal notranslate"><span class="pre">Sun</span></code>, …)</li>
<li>a date as 3-letter month and 1-2 digits day (e.g., <code class="docutils literal notranslate"><span class="pre">Sep</span> <span class="pre">5</span></code>, <code class="docutils literal notranslate"><span class="pre">Jan</span> <span class="pre">31</span></code>,
<code class="docutils literal notranslate"><span class="pre">Aug</span> <span class="pre">08</span></code>, …)</li>
<li>the words: <code class="docutils literal notranslate"><span class="pre">today</span></code>, <code class="docutils literal notranslate"><span class="pre">now</span></code>, <code class="docutils literal notranslate"><span class="pre">start</span></code>, <code class="docutils literal notranslate"><span class="pre">end</span></code></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">TIME</span></code> can be any of</p>
<ul class="simple">
<li>hours and minutes (e.g., <code class="docutils literal notranslate"><span class="pre">20:15</span></code>, <code class="docutils literal notranslate"><span class="pre">4:00</span></code>, <code class="docutils literal notranslate"><span class="pre">3:25</span></code>, …)</li>
<li>hours, minutes and seconds (e.g., <code class="docutils literal notranslate"><span class="pre">13:30:01</span></code>, <code class="docutils literal notranslate"><span class="pre">4:55:55</span></code>, …)</li>
<li>hours, minutes, seconds and milliseconds (e.g., <code class="docutils literal notranslate"><span class="pre">13:30:01.123</span></code>,
<code class="docutils literal notranslate"><span class="pre">4:55:55.700</span></code>, …)</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">OFFSET</span></code> is again composed of <code class="docutils literal notranslate"><span class="pre">OPERATOR````VALUE````UNIT</span></code> (not separated by
spaces)</p>
<p><code class="docutils literal notranslate"><span class="pre">OPERATOR</span></code> is either <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">-</span></code> (the latter requires quotes as it would
otherwise be interpreted as another parameter by the argument parser.</p>
<p><code class="docutils literal notranslate"><span class="pre">VALUE</span></code> is any number.</p>
<p><code class="docutils literal notranslate"><span class="pre">UNIT</span></code> is one of the following:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">sec</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">m</span></code>, <code class="docutils literal notranslate"><span class="pre">min</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">h</span></code>, <code class="docutils literal notranslate"><span class="pre">hours</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">days</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">w</span></code>, <code class="docutils literal notranslate"><span class="pre">weeks</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">mo</span></code>, <code class="docutils literal notranslate"><span class="pre">months</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">years</span></code></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">OFFSET</span></code> value is added / subtracted from the <code class="docutils literal notranslate"><span class="pre">DATE````TIME</span></code> value if
provided.</p>
<p>There are some rules for ease of use, that allow not to specify <code class="docutils literal notranslate"><span class="pre">DATE</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">TIME</span></code>. The behavior should be intuitive, and examples are provided below.
Here are some of the rules:</p>
<p><strong>Weekdays</strong>
if a weekday is provided without a date, the most recent day matching the
weekday is assumed.</p>
<p>For example, assuming the log file begins on <code class="docutils literal notranslate"><span class="pre">Tue</span> <span class="pre">Aug</span> <span class="pre">13</span> <span class="pre">00:00:00</span></code> and ends
on <code class="docutils literal notranslate"><span class="pre">Fri</span> <span class="pre">Sep</span> <span class="pre">9</span> <span class="pre">15:31:10</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --from Wed <span class="m">19</span>:00
</pre></div>
</div>
<p>This example would return lines that are later than <code class="docutils literal notranslate"><span class="pre">Wed</span> <span class="pre">Sep</span> <span class="pre">6</span> <span class="pre">19:00</span></code>.</p>
<dl class="docutils">
<dt><strong>Months</strong></dt>
<dd>if only a month is specified, the day is assumed to be <code class="docutils literal notranslate"><span class="pre">1</span></code>.</dd>
</dl>
<p>For example, the following line matches everything from <code class="docutils literal notranslate"><span class="pre">Sep</span> <span class="pre">1</span> <span class="pre">00:00:00</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --from Sep
</pre></div>
</div>
<dl class="docutils">
<dt><strong>Now</strong></dt>
<dd>if the keyword <code class="docutils literal notranslate"><span class="pre">now</span></code> is specified for, it uses the current date and time.</dd>
</dl>
<p>For example, the following line matches everything from 5 minutes ago:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --from <span class="s2">&quot;now -5min&quot;</span>
</pre></div>
</div>
<dl class="docutils">
<dt><strong>Today</strong></dt>
<dd>if the keyword <code class="docutils literal notranslate"><span class="pre">today</span></code> is specified for <code class="docutils literal notranslate"><span class="pre">DATE</span></code>, it uses the current date
and the time <code class="docutils literal notranslate"><span class="pre">00:00:00</span></code></dd>
</dl>
<p>For example, the following line matches everything from <em>today</em> at <code class="docutils literal notranslate"><span class="pre">00:00:00</span></code>
to <em>today</em> at <code class="docutils literal notranslate"><span class="pre">02:00:00</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --from today --to +2hours
</pre></div>
</div>
<dl class="docutils">
<dt><strong>Start</strong></dt>
<dd>if the keyword <code class="docutils literal notranslate"><span class="pre">start</span></code> is specified, it is replaced with the date and time
of the beginning of the log file.</dd>
</dl>
<p>For example, the following line matches all but the first day (24h) of the log
file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --from start +1day
</pre></div>
</div>
<dl class="docutils">
<dt><strong>End</strong></dt>
<dd>if the keyword <code class="docutils literal notranslate"><span class="pre">end</span></code> is specified, it is replaced with the date and time
of the end of the log file</dd>
</dl>
<p>For example, the following line returns the last 20 minutes of a log file (note
the quotation marks):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --from <span class="s2">&quot;end -20min&quot;</span>
</pre></div>
</div>
<dl class="docutils">
<dt><strong>Time</strong></dt>
<dd><code class="docutils literal notranslate"><span class="pre">TIME</span></code> can be combined with any of the keywords above and has precedence
of the keyword time</dd>
</dl>
<p>For example, the following line matches everything from today at <code class="docutils literal notranslate"><span class="pre">9:30</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --from today <span class="m">9</span>:30
</pre></div>
</div>
<dl class="docutils">
<dt><strong>Offset</strong></dt>
<dd>if only an <code class="docutils literal notranslate"><span class="pre">OFFSET</span></code> is specified without <code class="docutils literal notranslate"><span class="pre">DATE</span></code> and/or <code class="docutils literal notranslate"><span class="pre">TIME</span></code>, then it
depends if the parameter was <code class="docutils literal notranslate"><span class="pre">--from</span></code> or <code class="docutils literal notranslate"><span class="pre">--to</span></code>. For <code class="docutils literal notranslate"><span class="pre">--from</span></code>, the
offset is calculated from the start of the file, and for <code class="docutils literal notranslate"><span class="pre">--to</span></code> the offset
is calculated from the <code class="docutils literal notranslate"><span class="pre">--from</span></code> time if provided, or otherwise from the
end of the file.</dd>
</dl>
<p>For example, the following line matches the hour before the last hour in the
log file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlogfilter mongod.log --from <span class="s2">&quot;end -2h&quot;</span> --to +1h
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mloginfo.html" class="btn btn-neutral float-right" title="mloginfo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mlaunch.html" class="btn btn-neutral" title="mlaunch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>