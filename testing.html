

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Testing &mdash; mtools  documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/mtools.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Releases" href="release.html" />
    <link rel="prev" title="Development" href="development.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> mtools
          

          
            
            <img src="_static/mtools.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlaunch.html">mlaunch</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlogfilter.html">mlogfilter</a></li>
<li class="toctree-l1"><a class="reference internal" href="mloginfo.html">mloginfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="mlogvis.html">mlogvis</a></li>
<li class="toctree-l1"><a class="reference internal" href="mplotqueries.html">mplotqueries</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="contributing.html">Contribute to mtools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="style.html">Style Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-tox">Using tox</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-builds">Documentation builds</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release.html">Releases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changes to mtools</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mtools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="contributing.html">Contribute to mtools</a> &raquo;</li>
        
      <li>Testing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="testing">
<span id="id1"></span><h1>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">#</a></h1>
<p>mtools uses the following testing tools:</p>
<ul class="simple">
<li><a class="reference external" href="https://tox.readthedocs.io/en/latest/">tox</a> for creating a standardized
test environment</li>
<li><a class="reference external" href="https://github.com/nose-devs/nose">nose testing framework</a> for unit
testing</li>
<li><a class="reference external" href="http://flake8.pycqa.org/en/latest/">flake8</a> for style checking</li>
<li><a class="reference external" href="https://readthedocs.org/projects/isort/">isort</a> for import structure
checking</li>
<li><a class="reference external" href="http://www.pydocstyle.org">pydocstyle</a> for docstring (<a class="reference external" href="https://www.python.org/dev/peps/pep-0257/">PEP 257</a>) checking</li>
<li><a class="reference external" href="https://pypi.python.org/pypi/doc8">doc8</a> for documentation style
checking</li>
<li><a class="reference external" href="http://pythonhosted.org/pyenchant/">pyenchant</a> for documentation spell
checking</li>
</ul>
<p>If you implement a new feature anywhere in mtools, please write a test
function or test class for the feature and document it. If you fix a bug,
please re-run the test suite after the code change and make sure the tests
still pass. Please think carefully before changing code and its related test
concurrently, so it still tests the expected behavior and not what you consider
as fixed behavior.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">#</a></h2>
<p>tox is required for testing mtools and building the documentation:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo pip install tox
</pre></div>
</div>
</div>
<div class="section" id="using-tox">
<h2>Using tox<a class="headerlink" href="#using-tox" title="Permalink to this headline">#</a></h2>
<p>tox creates a virtual environment and installs dependencies. To run the basic
code test suite:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tox
</pre></div>
</div>
<p>To specify a particular test environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tox -e flake8
</pre></div>
</div>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">#</a></h3>
<p>tox configuration is controlled by the <a class="reference external" href="https://github.com/rueckstiess/mtools/blob/develop/tox.ini">tox.ini</a>. It consists of
general tox settings, a series of testenvs that can be
invoked individually (e.g. <code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">doc</span></code>), and configuration for
certain tests.</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">tox</span><span class="p">]</span>
<span class="n">minversion</span> <span class="o">=</span> <span class="mf">2.3</span>
<span class="n">envlist</span> <span class="o">=</span> <span class="n">py27</span>
<span class="n">skipsdist</span> <span class="o">=</span> <span class="kc">True</span>

<span class="p">[</span><span class="n">testenv</span><span class="p">]</span>
<span class="n">deps</span> <span class="o">=</span>
    <span class="o">-</span><span class="n">r</span><span class="p">{</span><span class="n">toxinidir</span><span class="p">}</span><span class="o">/</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
    <span class="o">-</span><span class="n">r</span><span class="p">{</span><span class="n">toxinidir</span><span class="p">}</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">whitelist_externals</span> <span class="o">=</span> <span class="n">make</span>
<span class="n">commands</span> <span class="o">=</span> <span class="n">nosetests</span> <span class="o">-</span><span class="n">d</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">coverage</span> <span class="o">--</span><span class="n">cover</span><span class="o">-</span><span class="n">package</span><span class="o">=</span><span class="n">mtools</span>

<span class="p">[</span><span class="n">testenv</span><span class="p">:</span><span class="n">doc</span><span class="p">]</span>
<span class="n">deps</span> <span class="o">=</span>
    <span class="o">-</span><span class="n">r</span><span class="p">{</span><span class="n">toxinidir</span><span class="p">}</span><span class="o">/</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
    <span class="n">doc8</span>
    <span class="n">pyenchant</span>
    <span class="n">sphinx</span>
    <span class="n">sphinxcontrib</span><span class="o">-</span><span class="n">spelling</span>
    <span class="n">sphinx_rtd_theme</span>
<span class="n">commands</span> <span class="o">=</span> <span class="n">doc8</span> <span class="n">doc</span>
    <span class="n">make</span> <span class="n">clean</span> <span class="o">-</span><span class="n">C</span> <span class="p">{</span><span class="n">toxinidir</span><span class="p">}</span><span class="o">/</span><span class="n">doc</span>
    <span class="c1"># make linkcheck -C {toxinidir}/doc -- currently cannot handle https</span>
    <span class="n">make</span> <span class="n">spelling</span> <span class="o">-</span><span class="n">C</span> <span class="p">{</span><span class="n">toxinidir</span><span class="p">}</span><span class="o">/</span><span class="n">doc</span>
    <span class="n">make</span> <span class="n">html</span> <span class="o">-</span><span class="n">C</span> <span class="p">{</span><span class="n">toxinidir</span><span class="p">}</span><span class="o">/</span><span class="n">doc</span>

<span class="p">[</span><span class="n">testenv</span><span class="p">:</span><span class="n">flake8</span><span class="p">]</span>
<span class="n">deps</span> <span class="o">=</span>
    <span class="n">pep8</span><span class="o">-</span><span class="n">naming</span>
    <span class="n">flake8</span>
<span class="n">commands</span> <span class="o">=</span> <span class="n">flake8</span>

<span class="p">[</span><span class="n">testenv</span><span class="p">:</span><span class="n">isort</span><span class="p">]</span>
<span class="n">deps</span> <span class="o">=</span> <span class="n">isort</span>
<span class="n">commands</span> <span class="o">=</span>
    <span class="n">isort</span> <span class="o">-</span><span class="n">c</span> <span class="o">--</span><span class="n">diff</span> <span class="o">-</span><span class="n">s</span> <span class="o">.</span><span class="n">tox</span> <span class="o">-</span><span class="n">o</span> <span class="n">dateutil</span> <span class="o">-</span><span class="n">o</span> <span class="n">numpy</span> <span class="o">-</span><span class="n">o</span> <span class="n">pymongo</span> <span class="o">-</span><span class="n">o</span> <span class="n">bson</span> <span class="o">-</span><span class="n">o</span> <span class="n">nose</span>

<span class="p">[</span><span class="n">testenv</span><span class="p">:</span><span class="n">pydocstyle</span><span class="p">]</span>
<span class="n">deps</span> <span class="o">=</span> <span class="n">pydocstyle</span>
<span class="n">commands</span> <span class="o">=</span> <span class="n">pydocstyle</span> <span class="o">--</span><span class="n">count</span>

<span class="p">[</span><span class="n">doc8</span><span class="p">]</span>
<span class="c1"># Ignore target directories</span>
<span class="n">ignore</span><span class="o">-</span><span class="n">path</span> <span class="o">=</span> <span class="n">doc</span><span class="o">/</span><span class="n">_build</span><span class="o">*</span><span class="p">,</span><span class="o">.</span><span class="n">tox</span>
<span class="c1"># File extensions to use</span>
<span class="n">extensions</span> <span class="o">=</span> <span class="o">.</span><span class="n">rst</span>
<span class="c1"># Maximum line length should be 79</span>
<span class="nb">max</span><span class="o">-</span><span class="n">line</span><span class="o">-</span><span class="n">length</span> <span class="o">=</span> <span class="mi">79</span>

<span class="p">[</span><span class="n">flake8</span><span class="p">]</span>
<span class="n">show</span><span class="o">-</span><span class="n">source</span> <span class="o">=</span> <span class="kc">True</span>
<span class="c1"># E123, E125 skipped as they are invalid PEP-8.</span>
<span class="c1"># N802 skipped (function name should be lowercase)</span>
<span class="c1"># N806 skipped (variable in function should be lowercase)</span>
<span class="n">ignore</span> <span class="o">=</span> <span class="n">E123</span><span class="p">,</span><span class="n">E125</span><span class="p">,</span><span class="n">N802</span><span class="p">,</span><span class="n">N806</span>
<span class="n">builtins</span> <span class="o">=</span> <span class="n">_</span>
<span class="n">exclude</span><span class="o">=.</span><span class="n">venv</span><span class="p">,</span><span class="o">.</span><span class="n">git</span><span class="p">,</span><span class="o">.</span><span class="n">tox</span><span class="p">,</span><span class="n">dist</span><span class="p">,</span><span class="o">*</span><span class="n">lib</span><span class="o">/</span><span class="n">python</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="n">egg</span><span class="p">,</span><span class="o">*</span><span class="n">figures</span><span class="o">/*</span><span class="p">,</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="n">count</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">statistics</span> <span class="o">=</span> <span class="n">true</span>
<span class="nb">max</span><span class="o">-</span><span class="n">complexity</span> <span class="o">=</span> <span class="mi">49</span>
</pre></div>
</div>
</div>
<div class="section" id="tox-ini-options">
<h3>tox.ini options<a class="headerlink" href="#tox-ini-options" title="Permalink to this headline">#</a></h3>
<dl class="docutils">
<dt>[tox]</dt>
<dd><ul class="first last simple">
<li><strong>minversion</strong>: minimum version of tox to use</li>
<li><strong>envlist</strong>: Python versions to test against. Also the list of testenvs
<code class="docutils literal notranslate"><span class="pre">tox</span></code> runs when invoked without <code class="docutils literal notranslate"><span class="pre">-e</span></code>.</li>
<li><strong>skipdist</strong>: run tox without requiring a <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file</li>
</ul>
</dd>
<dt>[testenv]</dt>
<dd><ul class="first last simple">
<li><strong>deps</strong>: packages required by <code class="docutils literal notranslate"><span class="pre">[testenv]</span></code>.</li>
<li><strong>whitelist_exernals</strong>: commands sourced from the local operating system
instead of being downloaded and installed by tox</li>
</ul>
</dd>
<dt>[testenv:NAME]</dt>
<dd><ul class="first last simple">
<li><strong>doc</strong>: Test and build the documentation</li>
<li><strong>flake8</strong>: run flake8 tests</li>
<li><strong>isort</strong>: run isort tests</li>
<li><strong>pydocstyle</strong>: run pydocstyle tests</li>
</ul>
</dd>
<dt>[doc8]</dt>
<dd><ul class="first last simple">
<li>configuration options for the doc8 tests run in the <code class="docutils literal notranslate"><span class="pre">doc</span></code> environment</li>
</ul>
</dd>
<dt>[flake8]</dt>
<dd><ul class="first last simple">
<li>configuration options for the flake8 tests run in the <code class="docutils literal notranslate"><span class="pre">flake8</span></code>
environment</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">#</a></h3>
<p>In order to run more quickly, tox reuses elements of its virtual test
environment. However, when a configuration option changes or a new package is
available, tox does not automatically refresh its environment.</p>
<p>If you or someone else changes a configuration option in <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> or alters
a requirements file, you must force tox to recreate the test
environment. You can do this in two ways:</p>
<ul>
<li><p class="first">Add the <code class="docutils literal notranslate"><span class="pre">-r,</span> <span class="pre">--recreate</span></code> option the next time you run tox:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ tox -r
</pre></div>
</div>
</li>
<li><p class="first">Delete the hidden <code class="docutils literal notranslate"><span class="pre">.tox</span></code> directory in the repository root where the
environment is stored:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>$ rm -rf .tox
</pre></div>
</div>
</li>
</ul>
<p>Most of the time, recreating the tox environment solves tox-related problems.
If you are still having issues, check the configuration in <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code>
is correct.</p>
<p>On rare occasions, a new version of an upstream dependency causes a failure.
The tox error output should provide some clue in the traceback. Package
maintainers will usually fix it these sorts of errors fairly quickly. In the
meantime, you can pin that package to the most recent working version in
the relevant requirements file. For example:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sphinx</span><span class="o">&lt;=</span><span class="mf">1.4</span><span class="o">.</span><span class="mi">1</span>
<span class="n">sphinx_rtd_theme</span><span class="o">==</span><span class="mf">0.1</span><span class="o">.</span><span class="mi">9</span>
</pre></div>
</div>
<p>If you do this, please retest every few days and remove the version requirement
when the package is fixed.</p>
</div>
</div>
<div class="section" id="documentation-builds">
<h2>Documentation builds<a class="headerlink" href="#documentation-builds" title="Permalink to this headline">#</a></h2>
<p>mtools documentation is written in <a class="reference external" href="http://www.sphinx-doc.org/en/stable/rest.html">reStructuredText</a> and built using <a class="reference external" href="http://www.sphinx-doc.org/en/stable/index.html">Sphinx</a>.</p>
<p>You can test and build the documentation by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tox -e doc
</pre></div>
</div>
<p>View the built HTML by opening <code class="docutils literal notranslate"><span class="pre">doc/_build/html/index.html</span></code>.</p>
<p>If the spelling checker flags a word that should be ignored, you can add it
to the <code class="docutils literal notranslate"><span class="pre">doc/spelling_wordlist.txt</span></code> file.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release.html" class="btn btn-neutral float-right" title="Releases" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="development.html" class="btn btn-neutral" title="Development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>